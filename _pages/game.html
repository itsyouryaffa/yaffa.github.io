---
layout: default
title: "Game"
permalink: /game/
author_profile: False
---

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Exciting Game</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #222;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-family: Arial, sans-serif;
    }
    canvas {
        display: block;
        background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    #instructions {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        background: rgba(0,0,0,0.7);
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 14px;
    }
</style>
</head>
<body>

<div id="instructions">A/D: Move | W: Jump | J: Shoot | R: Restart</div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 800;
canvas.height = 400;

const CONFIG = {
    GRAVITY: 0.6,
    GROUND_Y: 350,
    PLAYER_JUMP_POWER: -12,
    PLAYER_SPEED: 5,
    BULLET_SPEED: 8,
    BULLET_COOLDOWN: 200,
    MONSTER_BASE_SPEED: 3,
    MONSTER_SPAWN_BASE_RATE: 100,
    DIFFICULTY_SCALE: 600,
    COIN_SPAWN_RATE: 120,
    BIG_COIN_SPAWN_RATE: 300
};

class Player {
    constructor() {
        this.reset();
    }

    reset() {
        this.x = 100;
        this.y = 300;
        this.width = 40;
        this.height = 40;
        this.dx = 0;
        this.dy = 0;
        this.onGround = true;
        this.hp = 5;
        this.maxHp = 5;
        this.lastShot = 0;
        this.invulnerable = false;
        this.invulnerableTimer = 0;
        this.jumpsRemaining = 2;  // Allow 2 jumps
    }

    update() {
        this.x += this.dx;
        if (this.x < 0) this.x = 0;
        if (this.x > canvas.width - this.width) this.x = canvas.width - this.width;

        this.dy += CONFIG.GRAVITY;
        this.y += this.dy;

        if (this.y + this.height >= CONFIG.GROUND_Y) {
            this.y = CONFIG.GROUND_Y - this.height;
            this.dy = 0;
            this.onGround = true;
            this.jumpsRemaining = 2;  // Reset jumps when landing
        } else {
            this.onGround = false;
        }

        if (this.invulnerable) {
            this.invulnerableTimer--;
            if (this.invulnerableTimer <= 0) {
                this.invulnerable = false;
            }
        }
    }

    moveLeft() {
        this.dx = -CONFIG.PLAYER_SPEED;
    }

    moveRight() {
        this.dx = CONFIG.PLAYER_SPEED;
    }

    stopMoving() {
        this.dx = 0;
    }

    jump() {
        if (this.jumpsRemaining > 0) {
            this.dy = CONFIG.PLAYER_JUMP_POWER;
            this.jumpsRemaining--;
            this.onGround = false;
        }
    }

    shoot(bullets) {
        const now = Date.now();
        if (now - this.lastShot > CONFIG.BULLET_COOLDOWN) {
            bullets.push(new Bullet(this.x + this.width, this.y + this.height / 2 - 2.5));
            this.lastShot = now;
        }
    }

    takeDamage() {
        if (!this.invulnerable) {
            this.hp--;
            this.invulnerable = true;
            this.invulnerableTimer = 60;
            return this.hp <= 0;
        }
        return false;
    }

    draw() {
        if (this.invulnerable && Math.floor(this.invulnerableTimer / 5) % 2 === 0) {
            ctx.globalAlpha = 0.5;
        }

        ctx.fillStyle = "#1ABC9C";
        ctx.fillRect(this.x, this.y, this.width, this.height);

        ctx.fillStyle = "white";
        ctx.fillRect(this.x + 10, this.y + 10, 8, 8);
        ctx.fillRect(this.x + 22, this.y + 10, 8, 8);

        ctx.globalAlpha = 1.0;
        
        // Visual indicator for double jump availability
        if (!this.onGround && this.jumpsRemaining > 0) {
            ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
            ctx.fillRect(this.x, this.y + this.height, this.width, 3);
        }
    }
}

class Bullet {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.width = 12;
        this.height = 5;
        this.speed = CONFIG.BULLET_SPEED;
        this.active = true;
    }

    update() {
        this.x += this.speed;
        if (this.x > canvas.width) {
            this.active = false;
        }
    }

    draw() {
        ctx.fillStyle = "#F1C40F";
        ctx.fillRect(this.x, this.y, this.width, this.height);
        ctx.fillStyle = "#F39C12";
        ctx.fillRect(this.x, this.y + 1, this.width - 2, this.height - 2);
    }

    collidesWith(monster) {
        return this.x < monster.x + monster.width &&
               this.x + this.width > monster.x &&
               this.y < monster.y + monster.height &&
               this.y + this.height > monster.y;
    }
}

class Monster {
    constructor(difficultyTimer) {
        this.x = canvas.width;
        this.y = CONFIG.GROUND_Y - 40;
        this.width = 40;
        this.height = 40;
        this.maxHp = 1 + Math.floor(difficultyTimer / CONFIG.DIFFICULTY_SCALE);
        this.hp = this.maxHp;
        this.speed = CONFIG.MONSTER_BASE_SPEED + Math.min(difficultyTimer / CONFIG.DIFFICULTY_SCALE, 3);
        this.active = true;
        this.hue = Math.random() * 60;
    }

    update() {
        this.x -= this.speed;
        if (this.x + this.width < 0) {
            this.active = false;
        }
    }

    takeDamage() {
        this.hp--;
        return this.hp <= 0;
    }

    draw() {
        ctx.fillStyle = `hsl(${this.hue}, 80%, 50%)`;
        ctx.fillRect(this.x, this.y, this.width, this.height);

        ctx.fillStyle = "white";
        ctx.fillRect(this.x + 8, this.y + 10, 8, 8);
        ctx.fillRect(this.x + 24, this.y + 10, 8, 8);
        ctx.fillStyle = "black";
        ctx.fillRect(this.x + 11, this.y + 13, 3, 3);
        ctx.fillRect(this.x + 27, this.y + 13, 3, 3);

        const hpBarWidth = 36;
        const hpBarHeight = 4;
        const hpPercentage = this.hp / this.maxHp;

        ctx.fillStyle = "rgba(0,0,0,0.5)";
        ctx.fillRect(this.x + 2, this.y - 8, hpBarWidth, hpBarHeight);

        ctx.fillStyle = hpPercentage > 0.5 ? "#2ECC71" : hpPercentage > 0.25 ? "#F39C12" : "#E74C3C";
        ctx.fillRect(this.x + 2, this.y - 8, hpBarWidth * hpPercentage, hpBarHeight);
    }

    collidesWith(player) {
        return player.x < this.x + this.width &&
               player.x + player.width > this.x &&
               player.y < this.y + this.height &&
               player.y + player.height > this.y;
    }
}

class Coin {
    constructor() {
        this.x = canvas.width;
        // Increased max height from 150 to 250 for double-jump reach
        this.y = CONFIG.GROUND_Y - 40 - Math.random() * 190;
        this.width = 20;
        this.height = 20;
        this.speed = 2;
        this.active = true;
    }

    update() {
        this.x -= this.speed;
        if (this.x + this.width < 0) {
            this.active = false;
        }
    }

    draw() {
        ctx.fillStyle = "#FFD700";
        ctx.beginPath();
        ctx.arc(this.x + this.width/2, this.y + this.height/2, this.width/2, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#FFF8DC";
        ctx.beginPath();
        ctx.arc(this.x + this.width/2 - 3, this.y + this.height/2 - 3, 4, 0, Math.PI * 2);
        ctx.fill();
    }

    collidesWith(player) {
        return player.x < this.x + this.width &&
               player.x + player.width > this.x &&
               player.y < this.y + this.height &&
               player.y + player.height > this.y;
    }
}

class BigCoin {
    constructor() {
        this.x = canvas.width;
        // Increased max height from 150 to 250 for double-jump reach
        this.y = CONFIG.GROUND_Y - 40 - Math.random() * 210;
        this.width = 30;
        this.height = 30;
        this.speed = 2;
        this.active = true;
        this.value = 2;
    }

    update() {
        this.x -= this.speed;
        if (this.x + this.width < 0) {
            this.active = false;
        }
    }

    draw() {
        ctx.fillStyle = "#FFD700";
        ctx.beginPath();
        ctx.arc(this.x + this.width/2, this.y + this.height/2, this.width/2, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#FFF8DC";
        ctx.beginPath();
        ctx.arc(this.x + this.width/2 - 4, this.y + this.height/2 - 4, 6, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = "#8B4513";
        ctx.font = "bold 12px Arial";
        ctx.textAlign = "center";
        ctx.fillText("2x", this.x + this.width/2, this.y + this.height/2 + 4);
        ctx.textAlign = "left";
    }

    collidesWith(player) {
        return player.x < this.x + this.width &&
               player.x + player.width > this.x &&
               player.y < this.y + this.height &&
               player.y + player.height > this.y;
    }
}


class Game {
    constructor() {
        this.reset();
    }

    reset() {
        this.player = new Player();
        this.bullets = [];
        this.monsters = [];
        this.coins = [];
        this.bigCoins = [];
        this.score = 0;
        this.coinsCollected = 0;
        this.gameOver = false;
        this.monsterSpawnTimer = 0;
        this.coinSpawnTimer = 0;
        this.bigCoinSpawnTimer = 0;
        this.difficultyTimer = 0;
        this.highScore = parseFloat(localStorage.getItem('highScore') || '0');
    }

    update() {
        if (this.gameOver) return;

        this.player.update();

        this.bullets = this.bullets.filter(b => b.active);
        this.bullets.forEach(b => b.update());

        this.monsters = this.monsters.filter(m => m.active);
        this.monsters.forEach(m => m.update());

        this.coins = this.coins.filter(c => c.active);
        this.coins.forEach(c => c.update());

        this.bigCoins = this.bigCoins.filter(c => c.active);
        this.bigCoins.forEach(c => c.update());

        this.spawnMonster();
        this.spawnCoin();
        this.spawnBigCoin();
        this.checkCollisions();
        this.difficultyTimer++;
    }

    spawnMonster() {
        this.monsterSpawnTimer++;
        const spawnRate = Math.max(50, CONFIG.MONSTER_SPAWN_BASE_RATE - Math.floor(this.difficultyTimer / 300));

        if (this.monsterSpawnTimer > spawnRate) {
            this.monsters.push(new Monster(this.difficultyTimer));
            this.monsterSpawnTimer = 0;
        }
    }

    spawnCoin() {
        this.coinSpawnTimer++;
        if (this.coinSpawnTimer > CONFIG.COIN_SPAWN_RATE) {
            this.coins.push(new Coin());
            this.coinSpawnTimer = 0;
        }
    }

    spawnBigCoin() {
        this.bigCoinSpawnTimer++;
        if (this.bigCoinSpawnTimer > CONFIG.BIG_COIN_SPAWN_RATE) {
            this.bigCoins.push(new BigCoin());
            this.bigCoinSpawnTimer = 0;
        }
    }

    checkCollisions() {
        this.bullets.forEach(bullet => {
            this.monsters.forEach(monster => {
                if (bullet.active && monster.active && bullet.collidesWith(monster)) {
                    bullet.active = false;
                    if (monster.takeDamage()) {
                        monster.active = false;
                        this.score++;
                        if (this.score > this.highScore) {
                            this.highScore = this.score;
                            localStorage.setItem('highScore', this.highScore.toString());
                        }
                    }
                }
            });
        });

        this.monsters.forEach((monster, i) => {
            if (monster.active && monster.collidesWith(this.player)) {
                this.monsters.splice(i, 1);
                if (this.player.takeDamage()) {
                    this.gameOver = true;
                }
            }
        });

        this.coins.forEach((coin, i) => {
            if (coin.active && coin.collidesWith(this.player)) {
                this.coins.splice(i, 1);
                this.coinsCollected++;
                this.score += 0.5;
                if (this.score > this.highScore) {
                    this.highScore = this.score;
                    localStorage.setItem('highScore', this.highScore.toString());
                }
            }
        });

        this.bigCoins.forEach((bigCoin, i) => {
            if (bigCoin.active && bigCoin.collidesWith(this.player)) {
                this.bigCoins.splice(i, 1);
                this.coinsCollected += bigCoin.value;
                this.score += bigCoin.value * 0.5;
                if (this.score > this.highScore) {
                    this.highScore = this.score;
                    localStorage.setItem('highScore', this.highScore.toString());
                }
            }
        });
    }

    draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "#2C3E50";
        ctx.fillRect(0, CONFIG.GROUND_Y, canvas.width, canvas.height - CONFIG.GROUND_Y);
        ctx.fillStyle = "#27AE60";
        ctx.fillRect(0, CONFIG.GROUND_Y, canvas.width, 5);

        this.player.draw();
        this.bullets.forEach(b => b.draw());
        this.monsters.forEach(m => m.draw());
        this.coins.forEach(c => c.draw());
        this.bigCoins.forEach(c => c.draw());

        this.drawUI();
    }

    drawUI() {
        ctx.fillStyle = "rgba(0,0,0,0.7)";
        ctx.fillRect(10, 10, 180, 95);
        ctx.fillStyle = "white";
        ctx.font = "bold 20px Arial";
        ctx.fillText(`Score: ${this.score.toFixed(1)}`, 20, 35);
        ctx.font = "14px Arial";
        ctx.fillText(`High Score: ${this.highScore.toFixed(1)}`, 20, 55);
        ctx.fillText(`Coins: ${this.coinsCollected}`, 20, 75);

        ctx.font = "24px Arial";
        for (let i = 0; i < this.player.maxHp; i++) {
            ctx.fillText(i < this.player.hp ? "â¤" : "ðŸ–¤", 20 + i * 30, 95);
        }

        if (this.gameOver) {
            ctx.fillStyle = "rgba(0,0,0,0.8)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "white";
            ctx.font = "bold 48px Arial";
            ctx.textAlign = "center";
            ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 60);

            ctx.font = "24px Arial";
            ctx.fillText(`Final Score: ${this.score.toFixed(1)}`, canvas.width / 2, canvas.height / 2 - 10);
            ctx.fillText(`Coins: ${this.coinsCollected}`, canvas.width / 2, canvas.height / 2 + 30);

            ctx.font = "18px Arial";
            ctx.fillText("Press R to Restart", canvas.width / 2, canvas.height / 2 + 70);

            ctx.textAlign = "left";
        }
    }
}

const keys = {};
document.addEventListener("keydown", (e) => {
    keys[e.code] = true;

    if (e.code === "KeyW") {
        e.preventDefault();
        game.player.jump();
    }

    if (e.code === "KeyR" && game.gameOver) {
        game.reset();
    }
});

document.addEventListener("keyup", (e) => {
    keys[e.code] = false;
});

const game = new Game();

function gameLoop() {
    if (keys["KeyA"]) {
        game.player.moveLeft();
    } else if (keys["KeyD"]) {
        game.player.moveRight();
    } else {
        game.player.stopMoving();
    }

    if (keys["KeyJ"]) {
        game.player.shoot(game.bullets);
    }

    game.update();
    game.draw();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
